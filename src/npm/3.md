---
prev: ./2
next: ./4
category:
  - npm
tag:
  - npm
---

# 前端工程化 - 剖析 SemVer 规范

npm 包 中的模块版本都需要遵循 SemVer 规范——由 Github 起草的一个具有指导意义的，统一的版本号表示规则。实际上就是 Semantic Version（语义化版本）的缩写。

## 标准版本

SemVer 规范的标准版本号采用 X.Y.Z 的格式，其中 X、Y 和 Z 为非负的整数，且禁止在数字前方补零。X 是主版本号、Y 是次版本号、而 Z 为修订号。每个元素必须以数值来递增。

主版本号(major)：当你做了不兼容的 API 修改
次版本号(minor)：当你做了向下兼容的功能性新增
修订号(patch)：当你做了向下兼容的问题修正。
例如：1.9.1 -> 1.10.0 -> 1.11.0

## 先行版本

当某个版本改动比较大、并非稳定而且可能无法满足预期的兼容性需求时，你可能要先发布一个先行版本。

先行版本号可以加到“主版本号.次版本号.修订号”的后面，先加上一个连接号再加上一连串以句点分隔的标识符和版本编译信息。

内部版本(alpha):
公测版本(beta):
正式版本的候选版本 rc: 即 Release candiate

## 依赖版本管理

我们经常看到，在 package.json 中各种依赖的不同写法：

```json:no-line-numbers
{
 "dependencies": {
    "signale": "1.4.0",
    "figlet": "*",
    "react": "16.x",
    "table": "~5.4.6",
    "yargs": "^14.0.0"
  }
}
```

前面三个很容易理解：

- "signale": "1.4.0": 固定版本号
- "figlet": "\*": 任意版本（>=0.0.0）
- "react": "16.x": 匹配主要版本（>=16.0.0 <17.0.0）
- "react": "16.3.x": 匹配主要版本和次要版本（>=16.3.0 <16.4.0）

再来看看后面两个，版本号中引用了 ~ 和 ^ 符号：

- ~: 当安装依赖时获取到有新版本时，安装到 x.y.z 中 z 的最新的版本。即保持主版本号、次版本号不变的情况下，保持修订号的最新版本。

- ^: 当安装依赖时获取到有新版本时，安装到 x.y.z 中 y 和 z 都为最新版本。 即保持主版本号不变的情况下，保持次版本号、修订版本号为最新版本。
